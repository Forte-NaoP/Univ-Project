# 웹 페이지 제목 수집

## **1. 개요**

- 웹 페이지 주소로부터 제목(title)을 수집하는 프로그램 구현.

## **2. `collect` 함수**

- 표준 입력(`stdin`)으로부터 웹 페이지 주소 또는 명령을 입력받아 처리.
- 웹 페이지는 **wget**을 사용하여 다운로드 후 제목 추출.
- 명령어는 다음 네 가지가 있다:
  - `print`: 특정 도메인의 가장 긴 제목 출력.
  - `stat`: 수집된 제목의 총 개수 출력.
  - `load`: 파일로부터 입력을 읽어 처리.
  - `quit`: 프로그램 종료.

---

## **3. 처리 상세**

### **3.1 웹 페이지 입력**

- **입력 형식**: `"http://"` 또는 `"https://"`로 시작하는 문자열.
- **처리 순서**:
  1. 자식 프로세스를 생성하여 wget을 사용해 웹 페이지 다운로드.
  2. 다운로드 파일 이름은 `<현재 처리 순서>`로 지정 (예: `"2"`).
  3. 파일의 제목(title)을 추출하여 메모리에 저장.
  4. 표준 출력 형식:

    ```txt
        Sequence#>Domain Name:Title
    ```

    예: `1>skku.edu:Sungkyunkwan University`

- **도메인 이름 처리**:
  - 웹 주소의 대표 도메인을 의미
  - `.kr` (ccSLD)로 끝나는 도메인의 경우 2단계 밑의 하위 주소까지 포함.
  - 그 외에는 바로 하위 주소까지만 포함.
    예:

    ```txt
    icc.skku.ac.kr > skku.ac.kr
    http://www.skku.edu/eng > skku.edu
    ```

---

### **3.2 명령어 처리**

#### **`print`**

- 특정 도메인의 제목 중 가장 긴 것을 출력.
- 같은 길이의 제목이 여러 개일 경우, 먼저 수집된 것을 출력.
- 요청한 도메인이 수집되지 않았을 경우:
  
  ```txt
  Sequence#>Not Available
  ```

#### **`stat`**

- 수집된 제목의 총 개수를 출력.
- 중복된 제목과 같은 페이지를 여러 번 요청한 경우도 포함.

- 출력 형식:

  ```txt
  Sequence#>Count titles
  ```

#### **`load`**

- 지정된 파일로부터 입력을 읽어 처리.
- 입력 파일의 EOF에 도달할 때까지 반복.
- 중첩된 `load` 명령어도 처리.

#### **`quit`**

- 프로그램을 종료.
- 자식 프로세스가 존재할 경우, `SIGKILL` 시그널로 강제 종료.

---

### **3.3 잘못된 입력 처리**

- 웹 주소나 명령이 아닌 입력은 무시하고 처리 순서를 유지.
- wget 실행 중 에러가 발생할 경우:

  ```txt
  Sequence#>Error occurred!
  ```

---

### **3.4 동기화**

- `print`와 `stat` 명령은 기존까지 실행중인 모든 해당 도메인에 대한 작업이 완료된 후에 실행.

---

### **3.5 시그널 처리**

- `SIGINT`: 프로그램 종료 없이 무시.
- `SIGUSR1`: `stat` 명령과 동일한 동작 수행.

---

## **4. 구현 제약사항**

- **사용 가능 함수**:
  - 파일: 리눅스 시스템 콜.
  - 프로세스: `wait`, `exec` 계열 시스템 콜.
  - 메모리: `malloc`, `calloc`, `free`.
- 라이브러리 함수는 직접 구현하여 사용할 수 있으나, 제출 시 주석 처리 필요.
- 동적으로 할당된 모든 자원(파일, 메모리)은 프로그램 종료 전에 해제.
- ccTLD는 `.kr`만 고려.

---
